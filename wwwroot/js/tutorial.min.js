!function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):t.tutorial=e(t.jQuery)}("undefined"!=typeof self?self:this,function(t){var g=function(){return this}().document;function c(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function w(t){var e=t.getBoundingClientRect();return{t:e.top+g.body.scrollTop,l:e.left+g.body.scrollLeft,w:t.offsetWidth,h:t.offsetHeight}}function b(t,e,i,n,o,s,r){var l,a,p=w(t),d=g.createElement("div");switch(d.className="tutorial__tip",d.innerHTML="<div>"+i+"<div class='tutorial__footer'><span>"+(o+1)+" / "+s+"</span><button>"+(o+1<s?"<svg style='width:1.2em;height:1.2em' viewBox='0 0 24 24'><path fill='#fff' d='M8,5.14V19.14L19,12.14L8,5.14Z' /></svg>":"<svg style='width:1.2em;height:1.2em' viewBox='0 0 24 24'><path fill='#fff' d='M18,18H6V6H18V18Z' /></svg>")+"</button></div></div>",e.appendChild(d),d.querySelector(".tutorial__footer > button").addEventListener("click",r),n){case"top":d.style.top=p.t-(a=getComputedStyle(d),parseInt(a.height))+"px",d.style.left=p.l+p.w/2+"px",c(d,"tutorial__tip--top");break;case"right":d.style.top=p.t+p.h/2+"px",d.style.left=p.l+p.w+"px",c(d,"tutorial__tip--right");break;case"bottom":d.style.top=p.t+p.h+"px",d.style.left=p.l+p.w/2+"px",c(d,"tutorial__tip--bottom");break;case"left":d.style.top=p.t+p.h/2+"px",d.style.left=p.l-(l=getComputedStyle(d),parseInt(l.width))+"px",c(d,"tutorial__tip--left")}return setTimeout(function(){c(d,"tutorial__tip--visible")},100),d}function x(e,i,t,n,o){if(e>=i.length)t();else{var s=i[e];"function"==typeof s.onCreate&&s.onCreate.apply(n,[e,s,o]);var r=g.querySelector(s.target);if(!r)throw"Target for the step '"+e+"' was not found.";var l,a,p,d,c,u=s.html||"",f=s.position||"right",h=i.length,v=s.onNext||function(t,e,i){i()},y=(l=r,a=n.container,p=w(l),(d=g.createElement("div")).className="tutorial__pulse",d.innerHTML="<div></div><div></div><div></div><div></div>",d.style.width=p.w+"px",d.style.height=p.h+"px",d.style.top=p.t+"px",d.style.left=p.l+"px",a.appendChild(d),d),m=new Promise(function(t){c=b(r,n.container,u,f,e,h,v.bind(n,e+1,i[e+1],t))}),_=x.bind(n,e+1,i,t,n);m.then(function(t){var e,i,n=function(){c.removeEventListener("transitionend",n),y.parentNode.removeChild(y),c.parentNode.removeChild(c),m=null,_(t)};c.addEventListener("transitionend",n),i="tutorial__tip--visible",(e=c).classList?e.classList.remove(i):e.className=e.className.replace(new RegExp("(^|\\b)"+i.split(" ").join("|")+"(\\b|$)","gi")," ")})}}var e=function(t,e){this.steps=t||[],this.options=e||{},this.container=null,this.promise=null,this._onEscapeHandler=null,this.steps instanceof Array&&!(this.steps.length<=0)||console.error("Unable to create empty tutorial.")};return e.prototype.start=function(){var t,e=this;return this.container=((t=g.createElement("div")).className="tutorial",g.body.appendChild(t),t),this.promise=new Promise(function(t){e._onEscapeHandler=function(t,e){return 27!==(e.which?e.which:e.keyCode)||(t(),!1)}.bind(e,t),g.addEventListener("keydown",e._onEscapeHandler),x(0,e.steps,t,e)}),this.promise.then(function(){g.removeEventListener("keydown",e._onEscapeHandler),g.body.removeChild(e.container)}),this.promise},function(){var t=Array.prototype.slice.call(arguments);return new e(t[0],t[1])}});