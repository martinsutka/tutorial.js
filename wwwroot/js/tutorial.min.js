((e,t)=>{"function"==typeof define&&define.amd?define([],t):e.tutorial=t()})("undefined"!=typeof self?self:this,()=>{let o=function(){return this}(),m=o.document,y="tutorial";function p(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function _(e){var t=e.getBoundingClientRect();return{t:t.top+m.body.scrollTop,l:t.left+m.body.scrollLeft,w:e.offsetWidth,h:e.offsetHeight}}function w(e,t,i,n,s,o,r){var l,a=_(e);let d=m.createElement("div");switch(d.className=y+"__tip",d.innerHTML=`<div>
                            ${i}
                            <div class="${y}__footer">
                                <span>${s+1} / ${o}</span>
                                <button class="${y}__navigator">
                                    ${s+1<o?"<svg viewBox='0 0 24 24'><path fill='currentColor' d='M8,5.14V19.14L19,12.14L8,5.14Z' /></svg>":"<svg viewBox='0 0 24 24'><path fill='currentColor' d='M18,18H6V6H18V18Z' /></svg>"}
                                </button>
                            </div>
                        </div>`,t.appendChild(d),d.querySelector(`.${y}__navigator`).addEventListener("click",r),n){case"top":d.style.top=a.t-(l=d,parseInt(getComputedStyle(l).height))+"px",d.style.left=a.l+a.w/2+"px",p(d,y+"__tip--top");break;case"right":d.style.top=a.t+a.h/2+"px",d.style.left=a.l+a.w+"px",p(d,y+"__tip--right");break;case"bottom":d.style.top=a.t+a.h+"px",d.style.left=a.l+a.w/2+"px",p(d,y+"__tip--bottom");break;case"left":d.style.top=a.t+a.h/2+"px",d.style.left=a.l-(l=d,parseInt(getComputedStyle(l).width))+"px",p(d,y+"__tip--left")}return setTimeout(()=>p(d,y+"__tip--visible"),100),d}function i(e,i){e.scrollIntoView({behavior:"smooth",block:"center"});let n=window.scrollY,s=0;requestAnimationFrame(function e(){var t=o.scrollY;if(t===n){if(5<++s)return void i()}else s=0,n=t;requestAnimationFrame(e)})}function g(h,v,u,f,e){if(h>=v.length)u();else{var t=v[h];"function"==typeof t.onCreate&&t.onCreate.apply(f,[h,t,e]);let n=m.querySelector(t.target);if(!n)throw`Target for the step '${h}' was not found.`;let a=t.html||"",d=t.position||"right",p=v.length,c=t.onNext||function(e,t,i){i()};i(n,()=>{e=n,t=f.container,e=_(e),(i=m.createElement("div")).className=y+"__pulse",i.innerHTML="<div></div><div></div><div></div><div></div>",i.style.width=e.w+"px",i.style.height=e.h+"px",i.style.top=e.t+"px",i.style.left=e.l+"px",t.appendChild(i);let s=i;var e,t,i;let o,r=new Promise(e=>{o=w(n,f.container,a,d,h,p,c.bind(f,h+1,v[h+1],e))}),l=g.bind(f,h+1,v,u,f);r.then(e=>{let t=function(){o.removeEventListener("transitionend",t),s.parentNode.removeChild(s),o.parentNode.removeChild(o),r=null,l(e)};var i,n;o.addEventListener("transitionend",t),i=o,n=y+"__tip--visible",i.classList?i.classList.remove(n):i.className=i.className.replace(new RegExp("(^|\\b)"+n.split(" ").join("|")+"(\\b|$)","gi")," ")})})}}function t(e,t){this.steps=e||[],this.options=t||{},this.container=null,this.promise=null,this._onEscapeHandler=null,(!Array.isArray(this.steps)||this.steps.length<=0)&&console.error("Tutorial() : Unable to create empty tutorial.")}t.prototype.start=function(){var e;return this.container=((e=m.createElement("div")).className=y,m.body.appendChild(e),e),this.container.addEventListener("wheel",e=>e.preventDefault(),{passive:!1}),this.container.addEventListener("touchmove",e=>e.preventDefault(),{passive:!1}),this.container.addEventListener("mousedown",e=>e.preventDefault()),this.container.addEventListener("mouseup",e=>e.preventDefault()),this.container.addEventListener("click",e=>e.preventDefault()),this.promise=new Promise(e=>{this._onEscapeHandler=function(e,t){return 27!==(t.which||t.keyCode)||(e(),!1)}.bind(this,e),m.addEventListener("keydown",this._onEscapeHandler),g(0,this.steps,e,this)}),this.promise.then(()=>{m.removeEventListener("keydown",this._onEscapeHandler),m.body.removeChild(this.container)}),this.promise};return(...e)=>new t(...e)});